---
import { HydrationDirectiveProps } from "astro/dist/runtime/server/hydration";
import { marked } from "marked";
export interface Props {
  title: string;
  rawContent: string;
  tColour: string;
  date: string;
}

const { title, rawContent, tColour, date } = Astro.props;
const parsedContent = marked.parse(rawContent);
const formattedDate = new Date(date).toLocaleDateString("en-GB", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
const ordinalDay = formattedDate.replace(
  /(\d{1,2})(st|nd|rd|th)/,
  (match, day, suffix) => {
    if (day >= 11 && day <= 19) {
      return day + "th";
    } else {
      switch (day % 10) {
        case 1:
          return day + "st";
        case 2:
          return day + "nd";
        case 3:
          return day + "rd";
        default:
          return day + "th";
      }
    }
  }
);
---

<div class="card flex h-full w-full flex-col rounded-lg">
  <div
    class="bg-var bg-blue-500 flex-shrink border-b-2 py-3 px-4 leading-5 md:px-8"
  >
    <h3 class="mb-2 text-xl font-bold">
      {title}
    </h3>
    <h3 class="text-md mb-2 font-bold">
      {ordinalDay}
    </h3>
  </div>
  <div
    class="bg-white flex flex-grow flex-col items-start gap-3 py-5 px-4 md:px-8"
  >
    <div
      class="flex flex-col gap-3 text-left text-lg"
      set:html={parsedContent}
    />
  </div>
</div>

<style define:vars={{ tColour }}>
  .bg-var {
    background: var(--tColour);
  }
  .bg-white {
    background: #ffffff;
  }
  .card {
    border: 3px solid black;
    box-shadow: 6px 6px 0px 0px;
    /* transition: ease 0.2s; */
  }

  .card:hover .title {
    background-image: linear-gradient(
      rgba(210, 210, 210, 0.1),
      rgba(210, 210, 210, 20%)
    );
    transition: ease 0.2s;
  }
  .link-button {
    background: #ffffff;
    border: 2px solid black;
    box-shadow: 4px 4px 0px 0px;
  }
  .link-button:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0px 0px;
  }
</style>

---
import { HydrationDirectiveProps } from "astro/dist/runtime/server/hydration";
import { marked } from "marked";
import { formatDate } from "../../libs/dateFormat";
import { CollectionEntry } from "astro:content";
export interface Props {
  resource: CollectionEntry<"resources">;
}

const { resource } = Astro.props;
const { Content } = await resource.render();
---

<div class="card flex h-full w-full flex-col rounded-lg">
  <div
    class="bg-var bg-blue-500 flex flex-shrink items-center border-b-2 py-3 px-3 leading-5"
  >
    <div class="logo">
      <img
        src={resource.data.img}
        alt="Icon for resource"
        class="mr-4 w-[75px]"
      />
    </div>
    <div class="title flex items-center">
      <div>
        <h3 class="mb-1 text-xl font-bold">
          {resource.data.title}
        </h3>
        <h3 class="text-md">
          Last updated <span class="italic"
            >{formatDate(resource.data.postDate)}</span
          >
        </h3>
      </div>
    </div>

    <div class="flex flex-[2] items-center justify-end">
      <a
        class="mr-3 bhover:hover:scale-110"
        title="Return to Resources"
        href={`/resources#resource-${resource.slug}`}
        ><svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          ><path
            fill="currentColor"
            d="m10.875 19.3l-6.6-6.6q-.15-.15-.213-.325T4 12q0-.2.063-.375t.212-.325l6.6-6.6q.275-.275.688-.287t.712.287q.3.275.313.688T12.3 6.1L7.4 11h11.175q.425 0 .713.288t.287.712q0 .425-.287.713t-.713.287H7.4l4.9 4.9q.275.275.288.7t-.288.7q-.275.3-.7.3t-.725-.3Z"
          ></path></svg
        ></a
      >
    </div>
  </div>
  <div
    class="bg-white flex flex-grow flex-col items-start gap-3 py-5 px-4 md:px-8"
  >
    <div class="flex flex-col gap-3 text-left text-lg"><Content /></div>
  </div>

  <style
    define:vars={{
      colour1: resource.data.colors[0],
      colour2: resource.data.colors[1],
    }}
  >
    .bg-var {
      background: linear-gradient(90deg, var(--colour1), var(--colour2));
    }
  </style>
</div>

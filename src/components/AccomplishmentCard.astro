---
export interface Props {
  title: string;
  link: string;
  body: string;
  date: string;
  img: string;
  tColour: string;
}
const { tColour, title, link, date, body, img } = Astro.props;
const formattedDate = new Date(date).toLocaleDateString("en-GB", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
const ordinalDay = formattedDate.replace(
  /(\d{1,2})(st|nd|rd|th)/,
  (match, day, suffix) => {
    if (day >= 11 && day <= 19) {
      return day + "th";
    } else {
      switch (day % 10) {
        case 1:
          return day + "st";
        case 2:
          return day + "nd";
        case 3:
          return day + "rd";
        default:
          return day + "th";
      }
    }
  }
);
---

<div class="card bg-white flex h-full w-full flex-col">
  <div
    class="title flex flex-shrink flex-col items-center justify-between gap-1 px-5 pt-2 pb-2 text-center"
  >
    <p
      class="flex min-h-[60px] flex-grow items-center justify-center text-2xl font-bold"
    >
      {title}
    </p>
    <p class="font-bold uppercase">
      {ordinalDay}
    </p>
  </div>
  <div class="flex flex-grow flex-col gap-5 px-6 py-6">
    <div class="flex flex-col items-center justify-center md:h-[250px]">
      {
        img ? (
          <img
            class="mb-4 h-auto max-h-[250px] w-auto max-w-full"
            style="box-shadow: 4px 4px 0px 0px #000; border: 2px solid black;"
            src={img}
            alt={img}
          />
        ) : (
          <div />
        )
      }
    </div>
    <div class="flex flex-grow flex-col justify-between">
      <p class="text-md text-gray-700 mb-6 flex-grow">
        {body}
      </p>
      <a
        href={link}
        class="hover:pointer bg-white link-button px-4 py-2 text-center font-mono text-sm uppercase"
      >
        <span class="font-bold"> Read more</span>
      </a>
    </div>
  </div>

  <style define:vars={{ tColour }}>
    .card {
      box-shadow: 6px 6px 0px 0px;
      border: 2px solid black;
      transition: ease 0.2s;
    }

    body {
      font-family: "Lexend";
    }

    .bg-white {
      background-color: #fff;
    }

    .link-button {
      background: #ffffff;
      border: 1px solid black;
      box-shadow: 4px 4px 0px 0px;
    }

    .link-button:hover {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0px 0px;
    }
    .title {
      background-color: var(--tColour);
    }
  </style>
</div>
